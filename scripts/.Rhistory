}
for (i in nrow(targets)){
third_term[i,] <- sum(lubridate::intersect(targets[i,], contrasts[i,]))
}
View(abet1)
abet1 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = intersect(interval_obs, interval_obs2))
View(abet1)
abet1 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2)))
View(abet1)
abet1 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
mutate(total = sum(as.numeric(intersect(interval_obs, interval_obs2))))
View(abet1)
abet1 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
mutate(total = sum(as.numeric(intersect(interval_obs, interval_obs2))))
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
pmap(list(1, 4, 7), ~{sum(as.numeric(intersect(interval_obs, interval_obs2)))})
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
map(.x = interval_obs, .y = interval_obs2, ~{sum(as.numeric(intersect(.x, .y)))})
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
map2(.x = interval_obs, .y = interval_obs2, ~{sum(as.numeric(intersect(.x, .y)))})
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
map2(.x = interval_obs, .y = interval_obs2, .f = {sum(as.numeric(intersect(.x, .y)))})
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
map2(.x = interval_obs, .y = interval_obs2, .f = {results = sum(as.numeric(intersect(.x, .y)))})
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
map2(.f = {results = sum(as.numeric(intersect(interval_obs, interval_obs2)))})
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
map2(~{results = sum(as.numeric(intersect(interval_obs, interval_obs2)))})
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
map2(.f = {results = sum(as.numeric(intersect(interval_obs, interval_obs2)))})
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
map2(.x = interval_obs, .y = interval_obs2,
.f = {results = sum(as.numeric(intersect(interval_obs, interval_obs2)))})
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
map2(.x = interval_obs, .y = interval_obs2,
.f = ~{results = sum(as.numeric(intersect(interval_obs, interval_obs2)))})
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
map2(.x = .$interval_obs, .y = .$interval_obs2,
.f = ~{results = sum(as.numeric(intersect(interval_obs, interval_obs2)))})
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
map2(.x = interval_obs, .y = interval_obs2,
.f = ~{results = sum(as.numeric(intersect(.x$interval_obs, .y$interval_obs2)))})
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
mutate(results = map_dbl(abet1, ~{sum(as.numeric(intersect(.x$interval_obs, .y$interval_obs2)))}))
moons <-
list(
earth = 1737.1,
mars = c(11.3, 6.2),
neptune =
c(60.4, 81.4, 156, 174.8, 194, 34.8, 420, 2705.2, 340, 62, 44, 42, 40, 60)
)
View(moons)
dummy_dat <- read_csv(paste0(here(), "/data/dummy_data.csv"))
abet <- dummy_dat %>%
mutate(at1 = 1/(n() -1)) %>%
mutate(across(c(flower_start, flower_end),
function(x) as_date(x, origin = paste0(year-1, "-12-31")))
) %>%
mutate(interval_obs = interval(ymd(flower_start), ymd(flower_end))) %>%
# term two, duration of event for individual. note duration returns seconds,
# these data are at resolution of day, hence we convert
mutate(at2 = 1/
(as.numeric(
lubridate::as.duration(flower_end - flower_start)
)
/86400
)
)# %>%
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
map2(.x = interval_obs, .y = interval_obs2,
.f = ~{results = sum(as.numeric(intersect(.x$interval_obs, .y$interval_obs2)))})
abet1 <- abet %>%
mutate(at3 = map(interval_obs, ~ sum(lubridate::intersect(as.numeric(.x), interval_obs) %>%
as.numeric(replace_na(0)/86400)))) %>%
mutate(at3 = as.numeric(at3)/86400)
View(abet1)
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
map(.x = interval_obs, .y = object2,
.f = ~{results = sum(as.numeric(intersect(.x$interval_obs, .y$interval_obs2)))})
interval_obs9 <- abet1$interval_obs
map2(.x = interval_obs, .y = interval_obs2,
.f = ~{results = sum(as.numeric(intersect(.x$interval_obs, .y$interval_obs2)))})
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
map(.x = interval_obs9, .y = object2,
.f = ~{results = sum(as.numeric(intersect(.x$interval_obs, .y$interval_obs2)))})
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
map(.x = interval_obs9, .y = object2,
.f = ~{results = sum(as.numeric(intersect(.x, .y$interval_obs2)))})
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
map(.x = interval_obs9, .y = .$interval_obs,
.f = ~{results = sum(as.numeric(intersect(.x, .y$interval_obs2)))})
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
map(.x = interval_obs9, .y = .$interval_obs,
.f = ~{results = sum(as.numeric(intersect(.x, .y)))})
View(abet2)
abet2[[1]]
View(abet2)
abet2[[49]]
View(abet1)
View(abet1)
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
map(.x = .$interval_obs, .y = .$interval_obs,
.f = ~{results = sum(as.numeric(intersect(.x, .y)))})
View(abet2)
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
map2(.x = .$interval_obs, .y = .$interval_obs,
.f = ~{results = sum(as.numeric(intersect(.x, .y)))})
View(abet2)
abet2[[1]]
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
map(.x = .$interval_obs, .y = .$interval_obs,
.f = ~{results = sum(as.numeric(intersect(.x, .y)))})
View(abet2)
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
map_dbl(.x = .$interval_obs, .y = .$interval_obs,
.f = ~{results = sum(as.numeric(intersect(.x, .y)))})
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
map_dbl(.x = .$interval_obs,
.f = ~{results = sum(as.numeric(intersect(.x, .$interval_obs)))})
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
map(.x = .$interval_obs,
.f = ~{results = sum(as.numeric(intersect(.x, .$interval_obs)))})
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
map(.x = .$interval_obs,
.f = ~{results = sum(as.numeric(intersect(.x, .$interval_obs2)))})
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
map(.x = .$interval_obs,
.f = ~{results = sum(as.numeric(intersect(.x, abet1$interval_obs2)))})
abet2
abet2
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
mutate(results = map(.x = .$interval_obs,
.f = ~{sum(as.numeric(intersect(.x, abet1$interval_obs2)))}))
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
mutate(results = map(.x = .$interval_obs,
.f = ~{sum(as.numeric(intersect(.x, abet1$interval_obs2)))}))
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
mutate(results = map(.x = .$interval_obs,
.f = ~{sum(as.numeric(intersect(.x, .$interval_obs2)))}))
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
map(.x = .$interval_obs,
.f = ~{sum(as.numeric(intersect(.x, .$interval_obs2)))}))
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
map(.x = .$interval_obs,
.f = ~{sum(as.numeric(intersect(.x, .$interval_obs2)))})
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
map(.x = .$interval_obs,
.f = ~{results = sum(as.numeric(intersect(.x, abet1$interval_obs2)))})
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
map(.x = .$interval_obs,
.f = ~{results = sum(as.numeric(intersect(.x, abet1$interval_obs2)))})
map2(.x = .$interval_obs, .y = .$interval_obs,
.f = ~{results = sum(as.numeric(intersect(.x, .y)))})
map2(.x = .$interval_obs, .y = .$interval_obs,
.f = ~{results = sum(as.numeric(intersect(.x, .y)))})
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
map(.x = .$interval_obs,
.f = ~{results = sum(as.numeric(intersect(.x, abet1$interval_obs2)))})
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
#map_dbl(.x = .$interval_obs,,
#        .f = ~{results = sum(as.numeric(intersect(.x, .$interval_obs)))})
map_dbl(.x = .$interval_obs, .y = .$interval_obs,
.f = ~{results = sum(as.numeric(intersect(.x, .y)))})
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
map_dbl(.x = .$interval_obs, .y = .$interval_obs,
.f = ~{results = sum(as.numeric(intersect(.x, .y)))})
View(abet1)
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
map_dbl(.x = .$interval_obs, .y = .$interval_obs,
.f = ~{results = sum(as.numeric(intersect(.x, .y)))})
abet2
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
map_dbl(.x = .$interval_obs, .y = abet1$interval_obs,
.f = ~{results = sum(as.numeric(intersect(.x, .y)))})
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
map_dbl(.x = .$interval_obs, .y = .$interval_obs,
.f = ~{results = sum(as.numeric(intersect(.x, .y)))})
View(abet1)
dummy_dat <- dummy_dat %>% filter(species == 'tauschia') # the first row of this data frame should
abet1 <- abet %>%
mutate(at3 = map(interval_obs, ~ sum(lubridate::intersect(as.numeric(.x), interval_obs) %>%
as.numeric(replace_na(0)/86400)))) %>%
mutate(at3 = as.numeric(at3)/86400)
abet <- dummy_dat %>%
mutate(at1 = 1/(n() -1)) %>%
mutate(across(c(flower_start, flower_end),
function(x) as_date(x, origin = paste0(year-1, "-12-31")))
) %>%
mutate(interval_obs = interval(ymd(flower_start), ymd(flower_end))) %>%
# term two, duration of event for individual. note duration returns seconds,
# these data are at resolution of day, hence we convert
mutate(at2 = 1/
(as.numeric(
lubridate::as.duration(flower_end - flower_start)
)
/86400
)
)# %>%
abet1 <- abet %>%
mutate(at3 = map(interval_obs, ~ sum(lubridate::intersect(as.numeric(.x), interval_obs) %>%
as.numeric(replace_na(0)/86400)))) %>%
mutate(at3 = as.numeric(at3)/86400)
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
map_dbl(.x = .$interval_obs, .y = .$interval_obs,
.f = ~{results = sum(as.numeric(intersect(.x, .y)))})
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
map2(.x = .$interval_obs, .y = .$interval_obs,
.f = ~{results = sum(as.numeric(intersect(.x, .y)))})
View(abet2)
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
map2(.x = .$interval_obs,
.f = ~{results = sum(as.numeric(intersect(.x, .$interval_obs)))})
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
map2(.x = .$interval_obs,
.f = ~{results = sum(as.numeric(intersect(.x, abet1$interval_obs)))})
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
map2(.x = .$interval_obs,
.f = ~{results = sum(as.numeric(intersect(.x, .$interval_obs)))})
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
map2(.x = .$interval_obs,
.f = ~{results = sum(as.numeric(intersect(.x, abet1$interval_obs)))})
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
map(.x = .$interval_obs,
.f = ~{results = sum(as.numeric(intersect(.x, .$interval_obs)))})
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
map(.x = .$interval_obs,
.f = ~{results = sum(as.numeric(intersect(.x, abet1$interval_obs)))})
View(abet2)
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
map(.x = .$interval_obs,
.f = ~{results = sum(as.numeric(intersect(.x, abet1$interval_obs)))})
View(abet2)
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
map_dbl(.x = .$interval_obs,
.f = ~{results = sum(as.numeric(intersect(.x, abet1$interval_obs)))})
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
map_dbl(.x = .$interval_obs,
.f = ~{results = intersect(.x, abet1$interval_obs)})
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
mutate(Total = map_dbl(.x = .$interval_obs, # this code at least runs
.f = ~{results = sum(as.numeric(intersect(.x, abet1$interval_obs)))}))
View(abet2)
View(abet2)
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
mutate(Total = map_dbl(.x = .$interval_obs, # this code at least runs
.f = ~{results = sum(as.numeric(intersect(.x, abet1$interval_obs2)))}))
View(abet1)
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
mutate(Total = map_dbl(.x = .$interval_obs, # this code at least runs
.f = ~{results = sum(as.numeric(intersect(.x, .$interval_obs2)))}))
abet2 <- abet1 %>%
mutate(interval_obs2 = interval_obs) %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
mutate(Total = map_dbl(.x = .$interval_obs, # this code at least runs
.f = ~{results = sum(as.numeric(intersect(.x, abet1$interval_obs)))}))
abet1 <- abet %>%
mutate(at3 = map(interval_obs, ~ sum(lubridate::intersect(as.numeric(.x), interval_obs) %>%
as.numeric(replace_na(0)/86400)))) %>%
mutate(at3 = as.numeric(at3)/86400) %>%
mutate(interval_obs2 = interval_obs)
abet2 <- abet1 %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
mutate(Total = map_dbl(.x = .$interval_obs, # this code at least runs
.f = ~{results = sum(as.numeric(intersect(.x, abet1$interval_obs2)))}))
View(abet2)
abet2 <- abet1 %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
mutate(tester = as.numeric(intersect(interval_obs, abet1 %>% pull(interval_obs))))
View(abet2)
abet2 <- abet1 %>%
rowwise() %>%
mutate(to_subtract = as.numeric(intersect(interval_obs, interval_obs2))) %>%
ungroup() %>%
#mutate(tester = as.numeric(intersect(interval_obs, abet1 %>% pull(interval_obs))))
mutate(Total = map_dbl(.x = .$interval_obs, # this code at least runs
.f = ~{results = sum(as.numeric(intersect(.x, abet1 %>% pull(interval_obs))))}))
View(abet2)
